<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEWSLOOM TERMINAL Â· {{ date_str }}</title>
    <style>
        /* ============================================================
         * DEEP SPACE v3 â€” Star Trek LCARS Ã— Minority Report HUD
         * 
         * Complete visual overhaul:
         *   - Deep space black + star field (radial-gradient dots)
         *   - Nebula color washes (purple/cyan/blue gradients)
         *   - Holographic header with cyan glow + scanlines
         *   - HUD-style data display with targeting brackets
         *   - Signal line separators (animated gradient dashes)
         *   - Priority alerts as glowing light bars
         *   - Floating data particles effect
         *
         * Target: 900+ lines Â· PDF-ready Â· CJK fonts Â· Mobile responsive
         * ============================================================ */

        :root {
            /* === Deep Space Colors === */
            --space-void:       #020408;
            --space-deep:       #040810;
            --space-surface:    #0a1020;
            --space-panel:      rgba(4, 8, 16, 0.92);

            /* === HUD Cyan System === */
            --hud-cyan:         #00D4FF;
            --hud-cyan-bright:  #40E8FF;
            --hud-cyan-dim:     rgba(0, 212, 255, 0.08);
            --hud-cyan-glow:    0 0 5px #00D4FF, 0 0 15px #00D4FF, 0 0 30px rgba(0,212,255,0.4), 0 0 60px rgba(0,212,255,0.15);

            /* === Nebula Colors === */
            --nebula-purple:    #6B21A8;
            --nebula-blue:      #1E40AF;
            --nebula-teal:      #0D9488;
            --nebula-pink:      #BE185D;

            /* === Alert Colors (light bar style) === */
            --alert-red:        #FF1744;
            --alert-red-glow:   0 0 8px #FF1744, 0 0 20px rgba(255,23,68,0.4), 0 0 40px rgba(255,23,68,0.15);
            --alert-amber:      #FFD600;
            --alert-amber-glow: 0 0 6px #FFD600, 0 0 16px rgba(255,214,0,0.3);
            --alert-green:      #00E676;
            --alert-green-glow: 0 0 5px #00E676, 0 0 12px rgba(0,230,118,0.3);

            /* === Hologram Blue-White === */
            --holo-white:       #E0F7FF;
            --holo-blue:        #80DEEA;
            --holo-dim:         #4A6B7A;

            /* === Text === */
            --text-primary:     #E0F2FE;
            --text-secondary:   #7DD3FC;
            --text-dim:         #475569;

            /* === Borders === */
            --border:           rgba(0, 212, 255, 0.12);
            --border-strong:    rgba(0, 212, 255, 0.30);
            --border-accent:    rgba(0, 212, 255, 0.50);

            /* === Fonts === */
            --font-hud:     "SF Mono", "Consolas", "JetBrains Mono", "Courier New", "PingFang SC", monospace;
            --font-display: -apple-system, "Helvetica Neue", "PingFang SC", "Noto Sans SC", sans-serif;
            --font-sans:    -apple-system, BlinkMacSystemFont, "PingFang SC", "Noto Sans SC", "Microsoft YaHei", sans-serif;

            /* === Spacing === */
            --sp-1: 4px; --sp-2: 8px; --sp-3: 12px; --sp-4: 16px;
            --sp-5: 20px; --sp-6: 24px; --sp-8: 32px; --sp-10: 40px;
            --sp-12: 48px; --sp-16: 64px;
        }

        /* --- Page Setup --- */
        @page {
            size: A4;
            margin: 1cm 1.2cm;
            @bottom-right {
                content: "STARDATE {{ date_str }} | SECTOR " counter(page);
                font-family: var(--font-hud);
                font-size: 7pt;
                color: #475569;
            }
        }

        /* --- Reset --- */
        *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

        /* ============================================================
         * BODY â€” Deep Space Background with Stars + Nebulae
         * ============================================================ */
        body {
            font-family: var(--font-hud);
            font-size: 13px;
            line-height: 1.65;
            color: var(--text-primary);
            -webkit-font-smoothing: antialiased;
            -webkit-print-color-adjust: exact;
            print-color-adjust: exact;
            position: relative;
            min-height: 100vh;
            overflow-x: hidden;

            background:
                /* Stars â€” large bright ones */
                radial-gradient(circle 1.5px at 15% 8%, rgba(255,255,255,0.9) 0%, transparent 100%),
                radial-gradient(circle 1px at 72% 12%, rgba(200,230,255,0.8) 0%, transparent 100%),
                radial-gradient(circle 1.5px at 45% 25%, rgba(255,255,255,0.7) 0%, transparent 100%),
                radial-gradient(circle 1px at 88% 35%, rgba(180,220,255,0.8) 0%, transparent 100%),
                radial-gradient(circle 1.5px at 25% 45%, rgba(255,255,255,0.6) 0%, transparent 100%),
                radial-gradient(circle 1px at 65% 55%, rgba(200,200,255,0.7) 0%, transparent 100%),
                radial-gradient(circle 1.5px at 10% 65%, rgba(255,255,255,0.8) 0%, transparent 100%),
                radial-gradient(circle 1px at 50% 72%, rgba(180,200,255,0.6) 0%, transparent 100%),
                radial-gradient(circle 1.5px at 80% 80%, rgba(255,255,255,0.7) 0%, transparent 100%),
                radial-gradient(circle 1px at 35% 88%, rgba(200,220,255,0.8) 0%, transparent 100%),
                /* Stars â€” small dim ones */
                radial-gradient(circle 0.5px at 5% 15%, rgba(255,255,255,0.4) 0%, transparent 100%),
                radial-gradient(circle 0.5px at 20% 30%, rgba(200,200,255,0.3) 0%, transparent 100%),
                radial-gradient(circle 0.5px at 40% 10%, rgba(255,255,255,0.35) 0%, transparent 100%),
                radial-gradient(circle 0.5px at 55% 40%, rgba(200,220,255,0.3) 0%, transparent 100%),
                radial-gradient(circle 0.5px at 75% 50%, rgba(255,255,255,0.4) 0%, transparent 100%),
                radial-gradient(circle 0.5px at 90% 20%, rgba(200,200,255,0.35) 0%, transparent 100%),
                radial-gradient(circle 0.5px at 30% 60%, rgba(255,255,255,0.3) 0%, transparent 100%),
                radial-gradient(circle 0.5px at 60% 75%, rgba(200,220,255,0.4) 0%, transparent 100%),
                radial-gradient(circle 0.5px at 85% 90%, rgba(255,255,255,0.35) 0%, transparent 100%),
                radial-gradient(circle 0.5px at 15% 85%, rgba(200,200,255,0.3) 0%, transparent 100%),
                /* Nebula â€” purple cloud top-left */
                radial-gradient(ellipse 600px 400px at 15% 20%, rgba(107,33,168,0.15) 0%, transparent 70%),
                /* Nebula â€” cyan cloud center-right */
                radial-gradient(ellipse 500px 350px at 80% 50%, rgba(13,148,136,0.12) 0%, transparent 70%),
                /* Nebula â€” blue cloud bottom */
                radial-gradient(ellipse 700px 300px at 50% 90%, rgba(30,64,175,0.10) 0%, transparent 70%),
                /* Nebula â€” pink hint top-right */
                radial-gradient(ellipse 300px 200px at 90% 10%, rgba(190,24,93,0.08) 0%, transparent 70%),
                /* Base: Deep space gradient */
                linear-gradient(180deg, #020408 0%, #040810 40%, #0a1020 70%, #020408 100%);
            background-attachment: fixed;
        }

        /* --- Subtle grid overlay (HUD) --- */
        body::before {
            content: '';
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background-image:
                linear-gradient(rgba(0,212,255,0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0,212,255,0.03) 1px, transparent 1px);
            background-size: 32px 32px;
            pointer-events: none;
            z-index: 0;
        }

        /* --- Holographic scanlines --- */
        body::after {
            content: '';
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: repeating-linear-gradient(
                0deg,
                transparent, transparent 3px,
                rgba(0,212,255,0.015) 3px, rgba(0,212,255,0.015) 4px
            );
            pointer-events: none;
            z-index: 1;
        }

        /* --- Animations --- */
        @keyframes holo-scan {
            0% { top: -20%; }
            100% { top: 120%; }
        }

        @keyframes pulse-glow {
            0%, 100% { opacity: 1; box-shadow: var(--hud-cyan-glow); }
            50% { opacity: 0.8; box-shadow: 0 0 3px var(--hud-cyan), 0 0 8px var(--hud-cyan); }
        }

        @keyframes data-flow {
            0% { background-position: 0 0; }
            100% { background-position: 200px 0; }
        }

        @keyframes alert-blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        @keyframes targeting {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes status-pulse {
            0%, 100% { box-shadow: 0 0 8px currentColor, 0 0 16px currentColor; }
            50% { box-shadow: 0 0 4px currentColor; }
        }

        @keyframes signal-flow {
            0% { background-position: 0 0; }
            100% { background-position: 40px 0; }
        }

        /* --- Links --- */
        a {
            color: var(--hud-cyan);
            text-decoration: none;
            border-bottom: 1px solid transparent;
            transition: all 0.2s;
        }
        a:hover {
            border-bottom-color: var(--hud-cyan);
            text-shadow: 0 0 10px var(--hud-cyan-dim);
        }

        /* --- Container --- */
        .container {
            max-width: 920px;
            margin: 0 auto;
            padding: var(--sp-8) var(--sp-6);
            position: relative;
            z-index: 2;
        }

        /* ============================================================
         * HEADER â€” Holographic Projection HUD
         * ============================================================ */
        .header {
            border: 2px solid var(--hud-cyan);
            box-shadow: var(--hud-cyan-glow);
            padding: var(--sp-8) var(--sp-6);
            margin-bottom: var(--sp-10);
            position: relative;
            overflow: hidden;
            background:
                /* Holographic scanline texture */
                repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0,212,255,0.02) 2px, rgba(0,212,255,0.02) 4px),
                /* Panel gradient */
                linear-gradient(135deg, rgba(4,8,16,0.95) 0%, rgba(10,16,32,0.95) 100%);
        }

        /* Holographic scan beam (vertical sweep) */
        .header::before {
            content: '';
            position: absolute;
            left: 0; right: 0;
            top: -20%;
            height: 15%;
            background: linear-gradient(180deg,
                transparent,
                rgba(0,212,255,0.06),
                rgba(0,212,255,0.12),
                rgba(0,212,255,0.06),
                transparent
            );
            animation: holo-scan 4s linear infinite;
            pointer-events: none;
        }

        /* Top glow accent bar */
        .header::after {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0;
            height: 2px;
            background: linear-gradient(90deg,
                transparent 5%, var(--hud-cyan) 20%, var(--hud-cyan-bright) 50%, var(--hud-cyan) 80%, transparent 95%);
            box-shadow: 0 0 15px var(--hud-cyan), 0 0 30px rgba(0,212,255,0.3);
        }

        /* Corner targeting brackets */
        .header .bracket-tl,
        .header .bracket-tr,
        .header .bracket-bl,
        .header .bracket-br {
            position: absolute;
            width: 20px;
            height: 20px;
        }
        .header .bracket-tl { top: 6px; left: 6px; border-top: 2px solid var(--hud-cyan); border-left: 2px solid var(--hud-cyan); }
        .header .bracket-tr { top: 6px; right: 6px; border-top: 2px solid var(--hud-cyan); border-right: 2px solid var(--hud-cyan); }
        .header .bracket-bl { bottom: 6px; left: 6px; border-bottom: 2px solid var(--hud-cyan); border-left: 2px solid var(--hud-cyan); }
        .header .bracket-br { bottom: 6px; right: 6px; border-bottom: 2px solid var(--hud-cyan); border-right: 2px solid var(--hud-cyan); }

        .header-system {
            display: flex;
            align-items: center;
            gap: var(--sp-3);
            margin-bottom: var(--sp-4);
            font-size: 0.72em;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 0.12em;
            position: relative;
            z-index: 1;
        }

        .status-led {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--alert-green);
            color: var(--alert-green);
            animation: status-pulse 2s ease-in-out infinite;
        }

        .sys-label { color: var(--alert-green); font-weight: 700; }

        .header-brand {
            font-size: 2em;
            font-weight: 700;
            letter-spacing: 0.12em;
            color: var(--hud-cyan);
            text-transform: uppercase;
            margin-bottom: var(--sp-2);
            text-shadow: var(--hud-cyan-glow);
            position: relative;
            z-index: 1;
        }

        .header-title {
            font-size: 0.82em;
            color: var(--text-secondary);
            letter-spacing: 0.08em;
            margin-bottom: var(--sp-4);
            position: relative;
            z-index: 1;
        }

        /* Holographic divider line */
        .header-divider {
            height: 1px;
            background: linear-gradient(90deg,
                var(--hud-cyan) 0%, rgba(0,212,255,0.3) 40%, rgba(107,33,168,0.2) 60%, transparent 100%);
            margin: var(--sp-4) 0;
            box-shadow: 0 0 5px rgba(0,212,255,0.2);
        }

        .header-meta {
            display: flex;
            align-items: center;
            gap: var(--sp-5);
            font-size: 0.72em;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 0.08em;
            flex-wrap: wrap;
            position: relative;
            z-index: 1;
        }
        .stat { display: inline-flex; align-items: center; gap: var(--sp-2); }
        .stat-label { color: var(--text-dim); }
        .stat-value { color: var(--hud-cyan); font-weight: 700; }
        .must-read-value { color: var(--alert-red); font-weight: 700; text-shadow: 0 0 8px rgba(255,23,68,0.4); }

        /* ============================================================
         * EXECUTIVE SUMMARY â€” Holographic Command Box
         * ============================================================ */
        .exec-summary {
            background:
                repeating-linear-gradient(0deg, transparent, transparent 4px, rgba(0,212,255,0.01) 4px, rgba(0,212,255,0.01) 8px),
                linear-gradient(135deg, rgba(4,8,16,0.94) 0%, rgba(10,16,32,0.94) 100%);
            border: 1px solid var(--border-strong);
            border-left: 3px solid var(--hud-cyan);
            padding: var(--sp-6) var(--sp-6);
            margin-bottom: var(--sp-10);
            position: relative;
            box-shadow: 0 0 15px rgba(0,212,255,0.08), 0 0 30px rgba(0,212,255,0.04);
        }

        /* Holographic corner decoration */
        .exec-summary::before {
            content: '';
            position: absolute;
            top: 8px; right: 8px;
            width: 14px; height: 14px;
            border-right: 2px solid var(--hud-cyan);
            border-top: 2px solid var(--hud-cyan);
            opacity: 0.5;
        }
        .exec-summary::after {
            content: '';
            position: absolute;
            bottom: 8px; left: 8px;
            width: 14px; height: 14px;
            border-left: 2px solid rgba(107,33,168,0.4);
            border-bottom: 2px solid rgba(107,33,168,0.4);
        }

        .exec-label {
            font-size: 0.68em;
            font-weight: 700;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            color: var(--hud-cyan);
            margin-bottom: var(--sp-4);
            display: flex;
            align-items: center;
            gap: var(--sp-2);
        }
        .exec-label::before { content: 'â—ˆ'; color: var(--alert-green); margin-right: var(--sp-1); }
        .exec-label::after {
            content: '';
            flex: 1;
            height: 1px;
            background: linear-gradient(90deg, var(--border), transparent);
        }

        .exec-summary p {
            color: var(--text-secondary);
            font-size: 0.92em;
            line-height: 1.8;
            margin-bottom: var(--sp-3);
            font-family: var(--font-sans);
        }
        .exec-summary p:last-of-type { margin-bottom: 0; }
        .exec-summary p strong { color: var(--hud-cyan-bright); font-weight: 600; }

        /* ============================================================
         * SIGNAL LINE SEPARATOR (between sections)
         * Animated gradient dashed line
         * ============================================================ */
        .signal-line {
            height: 2px;
            margin: var(--sp-10) 0;
            position: relative;
            overflow: hidden;
        }
        .signal-line::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: repeating-linear-gradient(
                90deg,
                var(--hud-cyan) 0px,
                var(--hud-cyan) 8px,
                transparent 8px,
                transparent 16px,
                rgba(107,33,168,0.5) 16px,
                rgba(107,33,168,0.5) 24px,
                transparent 24px,
                transparent 32px
            );
            background-size: 40px 2px;
            animation: signal-flow 2s linear infinite;
        }
        /* Node dots on signal line */
        .signal-line::after {
            content: '';
            position: absolute;
            top: -3px;
            left: 50%;
            transform: translateX(-50%);
            width: 8px;
            height: 8px;
            background: var(--hud-cyan);
            border-radius: 50%;
            box-shadow: 0 0 8px var(--hud-cyan), 0 0 16px rgba(0,212,255,0.3);
        }

        /* ============================================================
         * SECTION â€” HUD Data Module
         * ============================================================ */
        .section { margin-bottom: var(--sp-12); }

        .section-header {
            display: flex;
            align-items: center;
            gap: var(--sp-3);
            padding: var(--sp-3) var(--sp-5);
            margin-bottom: var(--sp-5);
            background: linear-gradient(90deg, rgba(0,212,255,0.08) 0%, rgba(4,8,16,0.9) 60%, transparent 100%);
            border-left: 3px solid var(--hud-cyan);
            position: relative;
        }

        /* Targeting reticle decoration */
        .section-header::before {
            content: '';
            position: absolute;
            right: var(--sp-4);
            top: 50%;
            transform: translateY(-50%);
            width: 12px;
            height: 12px;
            border: 1px solid var(--hud-cyan);
            border-radius: 50%;
            opacity: 0.4;
        }
        .section-header::after {
            content: '';
            position: absolute;
            right: calc(var(--sp-4) + 3px);
            top: 50%;
            transform: translateY(-50%);
            width: 6px;
            height: 6px;
            background: var(--hud-cyan);
            border-radius: 50%;
            opacity: 0.4;
        }

        .section-icon {
            font-size: 1.1em;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0,0,0,0.4);
            border: 1px solid var(--border);
        }

        .section-title {
            font-size: 0.88em;
            font-weight: 700;
            color: var(--text-primary);
            letter-spacing: 0.12em;
            text-transform: uppercase;
            flex: 1;
        }

        .section-count {
            font-size: 0.68em;
            font-weight: 700;
            color: var(--hud-cyan);
            background: rgba(0,212,255,0.08);
            border: 1px solid var(--border);
            padding: 2px 10px;
        }

        /* ============================================================
         * BRIEF CARDS â€” HUD Data Entries with Alert Light Bars
         * ============================================================ */
        .brief {
            display: flex;
            gap: var(--sp-3);
            padding: var(--sp-3) var(--sp-5);
            margin-bottom: 1px;
            border-bottom: 1px solid rgba(255,255,255,0.02);
            transition: all 0.15s;
            border-left: 3px solid transparent;
            position: relative;
            page-break-inside: avoid;
        }
        .brief:hover {
            background: rgba(0,212,255,0.04);
            border-left-color: var(--hud-cyan);
            box-shadow: inset 40px 0 60px -40px rgba(0,212,255,0.06);
        }
        .brief:last-child { border-bottom: none; }

        /* --- Priority: Glowing light bar system --- */
        .brief.must-read {
            border-left: 4px solid var(--alert-red);
            background: linear-gradient(90deg, rgba(255,23,68,0.08) 0%, transparent 40%);
            box-shadow: inset 4px 0 12px -2px rgba(255,23,68,0.15);
        }

        /* Alert badge (CRITICAL) */
        .brief.must-read::after {
            content: 'â—‰ CRITICAL';
            position: absolute;
            top: var(--sp-1);
            right: var(--sp-3);
            font-size: 0.55em;
            font-weight: 700;
            color: var(--alert-red);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            animation: alert-blink 2s ease-in-out infinite;
        }

        .brief.recommended {
            border-left: 3px solid var(--alert-amber);
            background: linear-gradient(90deg, rgba(255,214,0,0.05) 0%, transparent 30%);
        }

        .brief.fyi {
            border-left: 3px solid var(--alert-green);
            opacity: 0.80;
        }
        .brief.fyi:hover { opacity: 1; }

        .brief-priority {
            font-size: 1em;
            width: 20px;
            flex-shrink: 0;
            display: flex;
            align-items: flex-start;
            padding-top: 3px;
        }

        .brief-content {
            flex: 1;
            min-width: 0;
            font-family: var(--font-sans);
        }

        .brief-headline {
            font-size: 0.95em;
            font-weight: 600;
            line-height: 1.45;
            margin-bottom: var(--sp-1);
        }
        .brief-headline a {
            color: var(--text-primary);
            transition: all 0.15s;
        }
        .brief-headline a:hover {
            color: var(--hud-cyan);
            text-shadow: 0 0 8px rgba(0,212,255,0.3);
            border-bottom: none;
        }
        .brief.must-read .brief-headline a { color: #FFF; font-weight: 700; }

        .brief-meta {
            display: flex;
            align-items: center;
            gap: var(--sp-2);
            margin-bottom: var(--sp-2);
            flex-wrap: wrap;
            font-size: 0.72em;
        }

        .source-badge {
            font-weight: 600;
            color: var(--text-dim);
            background: rgba(0,0,0,0.4);
            padding: 2px 8px;
            border: 1px solid var(--border);
            text-transform: uppercase;
            letter-spacing: 0.06em;
        }

        .tag {
            font-weight: 500;
            color: var(--nebula-purple);
            background: rgba(107,33,168,0.12);
            padding: 2px 8px;
            text-transform: lowercase;
            transition: background 0.15s;
            border: 1px solid rgba(107,33,168,0.2);
        }
        .tag:hover { background: rgba(107,33,168,0.2); }

        .brief-detail {
            color: var(--text-secondary);
            font-size: 0.88em;
            line-height: 1.7;
        }
        .brief-detail strong { color: var(--text-primary); font-weight: 600; }
        .brief-detail code {
            font-family: var(--font-hud);
            font-size: 0.9em;
            background: rgba(0,0,0,0.4);
            color: var(--hud-cyan);
            padding: 1px 5px;
            border: 1px solid var(--border);
        }

        /* ============================================================
         * FOOTER â€” Mission Control Status Bar
         * ============================================================ */
        .footer {
            text-align: center;
            padding: var(--sp-8) 0;
            margin-top: var(--sp-16);
            border-top: 2px solid var(--border-strong);
            position: relative;
        }

        /* Glow accent on top border */
        .footer::before {
            content: '';
            position: absolute;
            top: -1px;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--hud-cyan), transparent);
            box-shadow: 0 0 15px rgba(0,212,255,0.3);
        }

        /* Bottom nebula accent */
        .footer::after {
            content: '';
            position: absolute;
            bottom: 0; left: 0; right: 0;
            height: 40px;
            background: linear-gradient(180deg, transparent, rgba(107,33,168,0.05));
            pointer-events: none;
        }

        .footer-system {
            font-size: 0.68em;
            font-weight: 700;
            letter-spacing: 0.18em;
            text-transform: uppercase;
            color: var(--text-dim);
            margin-bottom: var(--sp-2);
        }

        .footer-sub {
            font-size: 0.6em;
            color: var(--text-dim);
            opacity: 0.5;
            letter-spacing: 0.1em;
            text-transform: uppercase;
        }

        .footer-sig {
            margin-top: var(--sp-4);
            font-size: 0.58em;
            color: var(--hud-cyan);
            opacity: 0.3;
            letter-spacing: 0.25em;
        }

        /* Coordinates readout */
        .footer-coords {
            font-size: 0.55em;
            color: var(--nebula-purple);
            opacity: 0.4;
            margin-top: var(--sp-2);
            letter-spacing: 0.15em;
        }

        /* ============================================================
         * PRINT
         * ============================================================ */
        @media print {
            body {
                background: #020408 !important;
                background-image: none !important;
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
            }
            body::before, body::after { display: none !important; }
            .container { max-width: 100%; padding: 0; }
            .header { box-shadow: none; }
            .header::before { display: none; }
            .header .bracket-tl, .header .bracket-tr, .header .bracket-bl, .header .bracket-br { display: none; }
            .exec-summary { box-shadow: none; }
            .exec-summary::before, .exec-summary::after { display: none; }
            .brief { transition: none; }
            .brief:hover { background: transparent; box-shadow: none; }
            .brief.must-read::after { display: none; }
            .section-header::before, .section-header::after { display: none; }
            .signal-line::before { animation: none; }
            .footer::before, .footer::after { display: none; }
            a { color: var(--text-primary) !important; border-bottom: none !important; }
            *, *::before, *::after {
                animation-duration: 0s !important;
                transition-duration: 0s !important;
            }
        }

        /* ============================================================
         * MOBILE
         * ============================================================ */
        @media (max-width: 640px) {
            body { font-size: 12px; }
            .container { padding: var(--sp-4) var(--sp-3); }
            .header { padding: var(--sp-5) var(--sp-4); }
            .header .bracket-tl, .header .bracket-tr, .header .bracket-bl, .header .bracket-br { display: none; }
            .header-brand { font-size: 1.4em; }
            .exec-summary { padding: var(--sp-4); }
            .exec-summary::before, .exec-summary::after { display: none; }
            .brief { padding: var(--sp-2) var(--sp-3); gap: var(--sp-2); }
            .brief.must-read::after { display: none; }
            .header-meta { gap: var(--sp-3); }
            .signal-line { margin: var(--sp-6) 0; }
        }

        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</head>
<body>
    <div class="container">

        <!-- ====== HEADER: Holographic HUD ====== -->
        <header class="header">
            <div class="bracket-tl"></div>
            <div class="bracket-tr"></div>
            <div class="bracket-bl"></div>
            <div class="bracket-br"></div>

            <div class="header-system">
                <span class="status-led"></span>
                <span class="sys-label">SYSTEMS NOMINAL</span>
                <span>Â·</span>
                <span>{{ generated_time }}</span>
            </div>
            <h1 class="header-brand">NEWSLOOM TERMINAL</h1>
            <div class="header-title">DEEP SPACE INTELLIGENCE Â· STARDATE {{ date_str }}</div>
            <div class="header-divider"></div>
            <div class="header-meta">
                <div class="stat">
                    <span class="stat-label">SIGNALS:</span>
                    <span class="stat-value">{{ total_items }}</span>
                </div>
                {% set must_read_total = [] %}
                {% for section_key, items in briefs.items() %}
                {% if items is iterable and items is not string %}
                {% for item in items %}
                {% if item.priority == 'ðŸ”´' %}{% if must_read_total.append(1) %}{% endif %}{% endif %}
                {% endfor %}
                {% endif %}
                {% endfor %}
                {% if must_read_total|length > 0 %}
                <div class="stat">
                    <span class="stat-label">CRITICAL:</span>
                    <span class="must-read-value">{{ must_read_total|length }}</span>
                </div>
                {% endif %}
                <div class="stat">
                    <span class="stat-label">SECTORS:</span>
                    <span class="stat-value">{{ briefs|length }}</span>
                </div>
            </div>
        </header>

        <!-- ====== EXECUTIVE SUMMARY ====== -->
        {% if executive_summary %}
        <div class="exec-summary">
            <div class="exec-label">MISSION BRIEFING</div>
            {% for line in executive_summary.strip().split('\n') %}
            {% if line.strip() %}
            <p>{{ line.strip() | md_inline }}</p>
            {% endif %}
            {% endfor %}
        </div>
        {% endif %}

        <!-- ====== SECTIONS ====== -->
        {% for section_key in section_order %}
        {% if section_key in briefs and briefs[section_key] is iterable and briefs[section_key] is not string and briefs[section_key]|length > 0 %}
        {% set meta = section_configs.get(section_key, {}) %}
        {% set items = briefs[section_key] %}

        {% if not loop.first %}
        <div class="signal-line"></div>
        {% endif %}

        <section class="section">
            <div class="section-header">
                <div class="section-icon">{{ meta.emoji|default('ðŸ“Œ') }}</div>
                <h2 class="section-title">{{ meta.title|default(section_key) }}</h2>
                <span class="section-count">{{ items|length }}</span>
            </div>

            {% for item in items %}
            {% set priority = item.priority|default('ðŸŸ¢') %}
            {% set p_class = 'must-read' if priority == 'ðŸ”´' else ('recommended' if priority == 'ðŸŸ¡' else 'fyi') %}
            <div class="brief {{ p_class }}">
                <div class="brief-priority">{{ priority }}</div>
                <div class="brief-content">
                    <div class="brief-headline">
                        <a href="{{ item.url|default('#') }}" target="_blank">{{ item.headline|default(item.title|default('Untitled')) }}</a>
                    </div>
                    <div class="brief-meta">
                        {% if item.source %}
                        <span class="source-badge">{{ item.source }}</span>
                        {% endif %}
                        {% if item.tags %}
                        {% for tag in item.tags %}
                        <span class="tag">{{ tag }}</span>
                        {% endfor %}
                        {% endif %}
                    </div>
                    {% if item.detail %}
                    <div class="brief-detail">{{ item.detail|default('') | md_inline }}</div>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </section>
        {% endif %}
        {% endfor %}

        <!-- ====== FOOTER ====== -->
        <footer class="footer">
            <div class="footer-system">NEWSLOOM DEEP SPACE COMMAND v3.0</div>
            <div class="footer-sub">AI-CURATED Â· {{ date_str }} Â· {{ total_items }} SIGNALS ANALYZED</div>
            <div class="footer-sig">/// END TRANSMISSION ///</div>
            <div class="footer-coords">COORDS: 47.6062Â°N 122.3321Â°W Â· FREQ: 2.4GHz Â· SIGNAL: STRONG</div>
        </footer>

    </div>
</body>
</html>
